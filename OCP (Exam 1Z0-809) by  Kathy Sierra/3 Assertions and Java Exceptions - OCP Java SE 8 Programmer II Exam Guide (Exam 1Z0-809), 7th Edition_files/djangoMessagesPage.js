webpackJsonp([41],{113:function(e,t,n){var o;(function(){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r,i){void 0!==(o=function(){return i(window)}.call(t,n,t,e))&&(e.exports=o)}(0,function(e){function LogStream(o){var i,a=o.trace?(Math.random()+Math.PI).toString(36).substring(2,10):null,s=o.page_info,l=o.token,u=o.print,c=o.no_format,d=function(){return"undefined"==typeof XDomainRequest?o.ssl:"https:"===e.location.protocol}();i=e.LEENDPOINT?e.LEENDPOINT:c?"localhost:8080/noformat":"localhost:8080/v1",i=(d?"https://":"http://")+i+"/logs/"+l;var f=!0,p=[],_=!1,g=!1;if(o.catchall){var h=e.onerror,m=function(e,t,n){return y({error:e,line:n,location:t}).level("ERROR").send(),!!h&&h(e,t,n)};e.onerror=m}var E=function(){var t=e.navigator||{doNotTrack:void 0},n=e.screen||{};return{url:(e.location||{}).pathname,referrer:document.referrer,screen:{width:n.width,height:n.height},window:{width:e.innerWidth,height:e.innerHeight},browser:{name:t.appName,version:t.appVersion,cookie_enabled:t.cookieEnabled,do_not_track:t.doNotTrack},platform:t.platform}},v=function(){var e=Array.prototype.slice.call(arguments);if(0===e.length)throw new Error("No arguments!");return 1===e.length?e[0]:e},y=function _rawLog(e){var n=v.apply(this,arguments),o={event:n};return"never"!==s&&(g&&"per-entry"!==s||(g=!0,void 0===n.screen&&void 0===n.browser&&_rawLog(E()).level("PAGE").send())),a&&(o.trace=a),{level:function(e){if(u&&"undefined"!=typeof console&&"PAGE"!==e){var n=null;"undefined"!=typeof XDomainRequest&&(n=o.trace+" "+o.event);try{console[e.toLowerCase()].call(console,n||o)}catch(e){console.log(n||o)}}return o.level=e,{send:function(){var e=[],n=JSON.stringify(o,function(n,o){if(void 0===o)return"undefined";if("object"===(void 0===o?"undefined":r(o))&&null!==o){if(-1!==t(e,o))return"<?>";e.push(o)}return o});_?p.push(n):S(l,n)}}}}};this.log=y;var S=function _apiCall(e,t){_=!0;var o=n();f&&(o.constructor===XMLHttpRequest?o.onreadystatechange=function(){4===o.readyState&&(o.status>=400?(console.error("Couldn't submit events."),410===o.status&&console.warn("This version of le_js is no longer supported!")):(301===o.status&&console.warn("This version of le_js is deprecated! Consider upgrading."),p.length>0?_apiCall(e,p.shift()):_=!1))}:o.onload=function(){p.length>0?_apiCall(e,p.shift()):_=!1},o.open("POST",i,!0),o.constructor===XMLHttpRequest&&(o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.setRequestHeader("Content-type","application/json")),o.overrideMimeType&&o.overrideMimeType("text"),o.send(t))}}function Logger(e){var t,n={ssl:!0,catchall:!1,trace:!0,page_info:"never",print:!1,endpoint:null,token:null};if("object"!==(void 0===e?"undefined":r(e)))throw new Error("Invalid parameters for createLogStream()");for(var o in e)n[o]=e[o];if(null===n.token)throw new Error("Token not present.");t=new LogStream(n);var i=function(e){if(t)return t.log.apply(this,arguments);throw new Error("You must call LE.init(...) first.")};return{log:function(){i.apply(this,arguments).level("LOG").send()},warn:function(){i.apply(this,arguments).level("WARN").send()},error:function(){i.apply(this,arguments).level("ERROR").send()},info:function(){i.apply(this,arguments).level("INFO").send()}}}var t=function(e,t){for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},n=function(){return"undefined"!=typeof XDomainRequest?new XDomainRequest:new XMLHttpRequest},o={},i=function(e){if(!o.hasOwnProperty(e))throw new Error("Invalid name for logStream");return o[e]},a=function(e){if("string"!=typeof e.name)throw new Error("Name not present.");if(o.hasOwnProperty(e.name))throw new Error("A logger with that name already exists!");return o[e.name]=new Logger(e),!0};return{init:function(e){var t={name:"default"};if("object"===(void 0===e?"undefined":r(e)))for(var n in e)t[n]=e[n];else{if("string"!=typeof e)throw new Error("Invalid parameters for init()");t.token=e}return a(t)},createLogStream:a,to:i,destroy:function(e){void 0===e&&(e="default"),delete o[e]},log:function(){for(var e in o)o[e].log.apply(this,arguments)},warn:function(){for(var e in o)o[e].warn.apply(this,arguments)},error:function(){for(var e in o)o[e].error.apply(this,arguments)},info:function(){for(var e in o)o[e].info.apply(this,arguments)}}})}).call(window)},1247:function(module,exports,__webpack_require__){var _=__webpack_require__(2);module.exports=Function(_.keys(_.templateSettings.imports),"return "+function(obj){var __t,__p="",__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,"")};with(obj||{})__p+='<div role="dialog" aria-labelledby="modal-title">\n    <div class="modal__content t-modal-content">'+(null==(__t=content)?"":__t)+'</div>\n    <div class="modal__controls">\n        <a href="#" class="button js-primary">'+(null==(__t=primaryButtonText)?"":__t)+"</a>\n    </div>\n<div>";return __p}.toString()).apply(void 0,_.values(_.templateSettings.imports))},1298:function(e,t,n){n(116),e.exports=n(669)},13:function(e,t,n){"use strict";var o;void 0!==(o=function(e){var t,o,r,i,a,s,l,u,c,d,f,p,_,g,h,m,E,v=n(2),y=n(16),S=n(6),I=n(1),b=y.hasLocalStorage();return n(5),o=function(){var e,t,n;return b?(e=function(e){return localStorage.getItem(e)},t=function(e,t){return null!=t&&localStorage.setItem(e,t)},n=function(e){localStorage.removeItem(e)}):(e=function(e){return I.cookie(e)},t=function(e,t){return null!=t&&I.cookie(e,t)},n=function(e){I.cookie(e,null)}),{remove:n,get:e,set:t}},t=o(),s=function(){var e={};try{e=JSON.parse(I.cookie(S.COOKIE_READER_PREFERENCES_KEY))||{}}catch(e){I.cookie(S.COOKIE_READER_PREFERENCES_KEY,null)}return e.font_size=e.font_size?parseFloat(e.font_size):S.FONT_SIZE_DEFAULT,e.column_width=e.column_width?parseFloat(e.column_width):S.READER_COLUMN_WIDTH_DEFAULT,e.reading_mode=e.reading_mode?e.reading_mode:S.READING_MODE_DEFAULT,e},g=function(e,t){var n=s();v.isObject(n)&&(n[e]=t,I.cookie(S.COOKIE_READER_PREFERENCES_KEY,JSON.stringify(n),{expires:365,path:"/"}))},h=function(){I.cookie(S.COOKIE_READER_PREFERENCES_KEY,null,{expires:365,path:"/"})},l=function(e){t.set("brightness",e),r=e},c=function(){return r||(r=t.get("brightness")),r},d=function(e){t.set("pagination",e),i=e},f=function(){return i||(i=t.get("pagination")),"undefined"===i?void 0:i},p=function(e){t.set("zoom_factor",e.toFixed(3)),a=e},_=function(){return a||(a=1*t.get("zoom_factor")),a},m=function(){var e,t,n;return e=function(){function _p8(e){var t=(Math.random().toString(16)+"000000000").substr(2,8);return e?"-"+t.substr(0,4)+"-"+t.substr(4,4):t}return _p8()+_p8(!0)+_p8(!0)+_p8()},t=function(e){return e===Object(e)?JSON.stringify(e):e},n=function(e){var t;if(e){try{t=JSON.parse(e)}catch(e){console.warn("storage#serializer#deserialize: Problem parsing JSON from localStorage.")}return t||{}}},{guuid:e,serialize:t,deserialize:n}},m=m(),E=function(){var e,t,n,o,r,i,a,s,l,u,c;return s=function(e,t){b?localStorage.setItem(e,t.join(",")):I.cookie(e,t.join(","))},l=function(e){var t;return t=b?localStorage.getItem(e):I.cookie(e),v.uniq(t&&t.split(","))||[]},u=function(e,t){return e+"-"+t},e=function(e){for(var t=[],n=l(e),o=0;o<n.length;o++){var r,i,a=n[o];r=b?localStorage.getItem(u(e,a)):I.cookie(u(e,a)),i=m.deserialize(r),null!=i&&t.push(i)}return t},t=function(t,n,o){var r,i=v.cloneDeep(e(t)),a=v.cloneDeep(n);return o=o||{},v.each(i,function(e){delete e.id}),o.idKey&&delete a.item[o.idKey],r=v.filter(i,v.matches(a.item)),!(r.length>0)},c=function(e,n,o){return n.id?e?t(e,n,o)?void 0:"storage#browserStore#create attempted to create a storage Object that was not unique.":"storage#browserStore#create attempted to create a storage Object without a namespace.":"storage#browserStore#create attempted to create a storage Object without an identifier."},n=function(e,t,n){var o,r=c(e,t,n);return n=n||{},r?!!n.error&&n.error():(o=l(e),o.push(t.id.toString()),b?localStorage.setItem(u(e,t.id),m.serialize(t.item)):I.cookie(u(e,t.id),m.serialize(t.item)),s(e,o),n.success?n.success(t.item):void 0)},r=function(e,t){t.id&&(-1===v.indexOf(l(e))&&n(e,t),b?localStorage.setItem(u(e,t.id),m.serialize(t.item)):I.cookie(u(e,t.id),m.serialize(t.item)))},o=function(e,t){var n=l(e),o=t.id.toString();b?localStorage.removeItem(u(e,o)):I.cookie(u(e,o),null);for(var r=0;r<n.length;r++)n[r]===o&&n.splice(r,1);s(e,n)},i=function(e){var t=new RegExp("^"+e+"-");b?localStorage.removeItem(e):I.cookie(e,null);for(var n in localStorage)t.test(n)&&(b?localStorage.removeItem(n):I.cookie(n,null))},{records:a,update:r,reset:i,read:e,create:n,destroy:o}},E=E(),{serializer:m,browserStore:E,browser:t,destroyReaderPreferences:h,storeReaderPreferences:g,destroyFontPreferences:u,retrieveReaderPreferences:s,storeBrightnessPreferences:l,retrieveBrightnessPreferences:c,storePaginationPreferences:d,retrievePaginationPreferences:f,storeZoomPreferences:p,retrieveZoomPreferences:_}}.call(t,n,t,e))&&(e.exports=o)},16:function(e,t,n){"use strict";var o;void 0!==(o=function(e){var t,o,r,i,a,s,l,u,c,d,f,p,_,g,h,m,E,v,y,S,I=n(1),b=n(6);return n(5),S=function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}},t=function(e){return/^(GET|HEAD|OPTIONS|TRACE)$/.test(e)},I.ajaxSetup({crossDomain:!1,beforeSend:function(e,n){t(n.type)||(o=I.cookie(b.CSRF_COOKIE_NAME),e.setRequestHeader("X-CSRFToken",o))}}),_=function(){var e=g();return{height:Math.floor(.8*e.height),width:Math.floor(.9*e.width)}},y=function(e){var t=b.LOGIN_URL,n=e||"Please log in to continue.";alert(gettext(n)),window.location=t},h=function(){return b.IS_IE8?document.documentElement.clientHeight:window.innerHeight},m=function(){return b.IS_IE8?document.documentElement.clientWidth:window.innerWidth},i=function(){var e=h(),t=m(),n=b.DEVICES.device;return(b.DEBUG||b.TESTING)&&b.IS_WEBKIT?(t=n.iphone.portrait[0],e=n.iphone.portrait[1]):b.IS_IPHONE5?(t=n.iphone5.portrait[0],e=n.iphone5.portrait[1]):b.IS_IPHONE?(t=n.iphone.portrait[0],e=n.iphone.portrait[1]):b.IS_IPAD?(t=b.IPAD.WIDTH,e=b.IPAD.HEIGHT):(e=h(),t=m()),{height:e,width:t}},p=function(){return window.orientation&&90===Math.abs(window.orientation)?"landscape":"portrait"},g=function(){var e,t,n=p(),o=b.DEVICES.device;return b.IS_IPAD?(t=window.innerWidth,e=window.innerHeight):b.IS_IPHONE5?(t=o.iphone5[n][0],e=o.iphone5[n][1]+o.iphone5.navBarHeight):b.IS_IPHONE?(t=o.iphone[n][0],e=o.iphone[n][1]+o.iphone.navBarHeight):"nexus_7"===b.DEVICES.current_device_name?(t=o.nexus_7[n][0],e=o.nexus_7[n][1]):(t=m(),e=h()),{height:e,width:t}},function(e){return e.getTime()+6e4*e.getTimezoneOffset()},a=function(e){var t=e.replace(/[TZ]/g," ").replace(/\..*/,"").replace(/-/g,"/");return new Date(t)},s=function(e){var t=e.replace(/[TZ]/g," ").replace(/\..*/,""),n=new Date,o=t.split(" "),r=o[0].split("-"),i=o[1].split(":");return n.setUTCFullYear(Number(r[0])),n.setUTCDate(Number(r[2])),n.setUTCMonth(Number(r[1])-1),n.setUTCHours(Number(i[0])),n.setUTCMinutes(Number(i[1])),n.setUTCSeconds(Number(i[2])),n},v=function(e){var t,n,o;if(b.DEBUG){if(arguments.length>1)for(t=1,n=arguments.length;t<n;t++)e+=" "+arguments[t];o=(new Date).getTime(),e="["+o+"] "+e,window.console&&console.log&&console.log(e),I.post("/debug/",{message:e})}},u=function(e){b.TESTING&&(window.console&&console.log&&console.log(e),I.post("/debug/",{message:e}))},function(e){var t=null;return I.each(e,function(e,n){null!==n&&null!==n.substring&&(t+=n.substring(1,25)+" |  ")}),t},function(e){var t;return I.each(window.getComputedStyle(e),function(n,o){t+=o+" = "+window.getComputedStyle(e).getPropertyValue(o)+"\n"}),I.each(e,function(e,n){t+=e+" = "+n+"\n"}),t},f=function(){return(new Date).toISOString()},d=function(e){return new Date(e.replace(/-/g,"/").replace(/[TZ]/g," "))},E=function(e){return"#"+e.replace(/(:|\.)/g,"\\$1")},c=/^["'](.+)["']$/,r=function(e){return e.replace(c,"$1")},l=function(){var e=new Date,t=-e.getTimezoneOffset(),n=t>=0?"+":"-",o=function(e){var t=Math.abs(Math.floor(e));return(t<10?"0":"")+t};return e.getFullYear()+"-"+o(e.getMonth()+1)+"-"+o(e.getDate())+"T"+o(e.getHours())+":"+o(e.getMinutes())+":"+o(e.getSeconds())+"."+o(e.getMilliseconds())+n+o(t/60)+":"+o(t%60)},{debug:v,formatLocalDate:l,currentDatetime:f,dateFromISO:d,dbDatetimeToDate:a,getImageSize:_,getScreenSize:i,getViewport:g,getOrientation:p,hasLocalStorage:S,jq:E,noQuotes:r,test:u,redirectToLogin:y,utcISO8601ToDate:s}}.call(t,n,t,e))&&(e.exports=o)},21:function(e,t){e.exports={"logentries-tokens":{heron:"0509ee1a-2e53-4916-a7fa-9848b003e2cb"},analytics_key:"flow-ga"}},5:function(e,t,n){"use strict";(function(e){e.cookie=function(t,n,o){if(void 0===n){var r=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),a=0;a<i.length;a++){var s=e.trim(i[a]);if(s.substring(0,t.length+1)==t+"="){r=decodeURIComponent(s.substring(t.length+1));break}}return r}o=o||{},null===n&&(n="",o.expires=-1);var l="";if(o.expires&&("number"==typeof o.expires||o.expires.toUTCString)){var u;"number"==typeof o.expires?(u=new Date,u.setTime(u.getTime()+24*o.expires*60*60*1e3)):u=o.expires,l="; expires="+u.toUTCString()}var c=o.path?"; path="+o.path:"",d=o.domain?"; domain="+o.domain:"",f=o.secure?"; secure":"";return document.cookie=[t,"=",encodeURIComponent(n),l,c,d,f].join(""),!1}}).call(t,n(1))},6:function(e,t,n){"use strict";var o;void 0!==(o=function(){var e,t=document.getElementsByTagName("html")[0],n=t.getAttribute("data-debug"),o=t.getAttribute("data-testing"),r=t.getAttribute("data-csrf-cookie")||"csrftoken",i=t.getAttribute("data-dashboard-url"),a=t.getAttribute("data-terms-url"),s=t.getAttribute("data-privacy-url"),l=t.getAttribute("data-login-url"),u=function(e){return!!Number(e)};return e={DASHBOARD_URL:i,TERMS_URL:a,PRIVACY_URL:s,LOGIN_URL:l,DEBUG:u(null===n||n),TESTING:u(null===o||o),BASE_API_URL:"/nest/api",BASE_API_PATH:"/nest/api",LOGIN_COOKIE_NAME:"logged_in",CSRF_COOKIE_NAME:r,TOC_STATE_COOKIE_NAME:"creativeforge_toc_open",IS_IPHONE:-1!==navigator.appVersion.indexOf("iPhone OS "),IS_IPAD:-1!==navigator.appVersion.indexOf("iPad"),IS_ANDROID:-1!==navigator.appVersion.indexOf("Android"),IS_NEXUS_7:-1!==navigator.appVersion.indexOf("Nexus 7"),IS_IE8:(" "+t.className+" ").indexOf(" ie8 ")>-1,SUPPORTS_PAGED_READING:Modernizr.csscolumns,BACKBONE_URL_ROOT:"/",LOCALSTORE_USAGE_KEY:"sbo_usage_data",LOCALSTORE_KALTURA_SESSION_KEY:"sbo_video_session_data",COOKIE_READER_PREFERENCES_KEY:"reader_preferences",IBIS_BOOK_CLASS:"#sbo-rt-content",KALTURA_PLAYER_ID:"#js-kaltura-player-region",LOGENTRIES_TOKEN:"0509ee1a-2e53-4916-a7fa-9848b003e2cb",FONT_NAME_DEFAULT:"Georgia",FONT_SIZE_DEFAULT:1,FONT_SIZE_MIN:.35,FONT_SIZE_MAX:1.85,READER_COLUMN_WIDTH_DEFAULT:65,READER_COLUMN_WIDTH_MIN:25,READER_COLUMN_WIDTH_MAX:95,READING_MODE_DEFAULT:"day-mode",ZOOM_FACTOR_DEFAULT:1.5,ZOOM_FACTOR_STEP_MULTIPLE:1.2,ZOOM_FACTOR_MIN:.75,ZOOM_FACTOR_MAX:3,LOADING_DELAY:2e3,MAX_NUM_ITEMS_IN_BOOK_LIST:25,SHRINK_TITLE_THRESHOLD:60,ELIDE_TITLE_THRESHOLD:60,ELIDE_DESCRIPTION_THRESHOLD:500,ICON_WIDTH:75,COVER_INFO_PAGE_HEIGHT:120,BOOKMARK_WIDTH:40,BOOKMARK_HEIGHT:40,LAST_SELECTOR:"#ibis-final-content",BRIGHTNESS_STEP_VALUE:25,BRIGHTNESS_MIN:50,BRIGHTNESS_MAX:255,HREF_SEPARATOR:",",PAGINATION_HINT_DISPLAY_MS:500,MAX_EVENTS_PER_REQUEST:20,VIRTUAL_PAGES_READ_UPDATE_INTERVAL:15e3,USAGE_EVENT_SYNC_INTERVAL:1,USAGE_UPDATE_INTERVAL:15e3,USAGE_TIMER_INTERVAL:6e4,SCROLL_READING_DEBOUNCE:500,PAGE_SKIM_TIME:3e3,SHORT_DATE_FORMAT:"%b %e",LONG_DATE_FORMAT:"%B %e %Y",TOOLBAR_HEIGHT:61},e.FIRST_SELECTOR=e.IBIS_BOOK_CLASS+" *:first",e.IS_IOS=e.IS_IPHONE||e.IS_IPAD,e.IS_IPHONE5=e.IS_IPHONE&&568===window.screen.height,e.IS_WEBKIT=-1!==navigator.appVersion.indexOf("WebKit")&&!e.IS_IPHONE&&!e.IS_ANDROID&&!e.IS_IPAD,e.IS_MOBILE_HTML5_COMPATIBLE=e.IS_IPHONE||e.IS_ANDROID,e.IS_MOBILE=e.IS_MOBILE_HTML5_COMPATIBLE,e.FONT_DEFAULT_PREFERENCES={font_size:e.FONT_SIZE_DEFAULT,font_name:e.FONT_NAME_DEFAULT},e.VIDEO_PREFERENCE_STORAGE_KEY={playback_rate:"video_preference_playback_rate",playback_quality:"video_preference_playback_quality"},e.DEVICES={device:{galaxy_tab:{portrait:[400,657],landscape:[683,400],navBarHeight:56,is_ua:!1},nexus_7:{portrait:[603,796],landscape:[965,443],navBarHeight:void 0,is_ua:!1},xoom:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1},desire:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1},iphone:{portrait:[320,356],landscape:[480,208],navBarHeight:60,is_ua:!1},iphone5:{portrait:[320,444],landscape:[568,208],navBarHeight:60,is_ua:!1},other:{portrait:[void 0,void 0],landscape:[void 0,void 0],navBarHeight:void 0,is_ua:!1}},current_device_name:"other"},e.KEYCODE={RIGHT_ARROW:39,LEFT_ARROW:37,SPACEBAR:32,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57},e.IPAD={WIDTH:768,HEIGHT:1024,STATUS_BAR:20},-1!==navigator.appVersion.indexOf("SCH-I800")&&(e.DEVICES.device.galaxy_tab.is_ua=!0,e.DEVICES.current_device_name="galaxy_tab"),-1!==navigator.appVersion.indexOf("Nexus 7")&&(e.DEVICES.device.nexus_7.is_ua=!0,e.DEVICES.current_device_name="nexus_7"),e.USER_AGENT=navigator.userAgent,e}.call(t,n,t,e))&&(e.exports=o)},669:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}var o=n(1),r=_interopRequireDefault(o),i=n(793),a=_interopRequireDefault(i);(0,r.default)(function(){var e;1===(0,r.default)("#django-messages").length&&1===(0,r.default)("#welcome-to-safari-modal").length&&(e=new a.default({animationSpeed:"normal"}),e.show())})},792:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(e,t,n){return t&&defineProperties(e.prototype,t),n&&defineProperties(e,n),e}}(),r=n(4),i=_interopRequireDefault(r),a=n(1),s=_interopRequireDefault(a),l=n(2),u=_interopRequireDefault(l),c=n(9),d=_interopRequireDefault(c),f=n(1247),p=_interopRequireDefault(f),_=i.default.View,g=function(e){function DisplayModalView(e){_classCallCheck(this,DisplayModalView),u.default.defaults(e,{className:"display-modal-view",events:{"click .close-display-modal":"close","click .js-primary":"onPrimaryButtonClick"}});var t=_possibleConstructorReturn(this,(DisplayModalView.__proto__||Object.getPrototypeOf(DisplayModalView)).call(this,e));return t.animationSpeed=e.animationSpeed,t.primaryButtonText=e.primaryButtonText,t.templateSelector=e.templateSelector,t.modalTitle="",t.isOpen=!1,t.getTemplate=t.getTemplate.bind(t),t.accessibility=t.accessibility.bind(t),t.onKeyDown=t.onKeyDown.bind(t),t.show=t.show.bind(t),t.close=t.close.bind(t),t.onModalShown=t.onModalShown.bind(t),t.render=t.render.bind(t),t.onPrimaryButtonClick=t.onPrimaryButtonClick.bind(t),(0,s.default)("body").append(t.$el),t.$overlay=(0,s.default)(".modal-overlay").length?(0,s.default)(".modal-overlay"):(0,s.default)('<div class="modal-overlay" style="display: none"></div>').appendTo("body"),t.$overlay.on("click",t.close.bind(t)),t}return _inherits(DisplayModalView,e),o(DisplayModalView,[{key:"getTemplate",value:function(){return(0,s.default)(this.templateSelector).html()}},{key:"accessibility",value:function(){this.lastFocus=document.activeElement,(0,s.default)(this.lastFocus).blur(),d.default.setTabIndex((0,s.default)("body"),{remove:!0}),d.default.setTabIndex(this.$el)}},{key:"onKeyDown",value:function(){var e=(0,s.default)(event.target);return 27===event.keyCode?(this.close(),!1):e.is(this.$firstFocusableElement)&&event.shiftKey&&9===event.keyCode?(this.$lastFocusableElement.focus(),!1):!(e.is(this.$lastFocusableElement)&&!event.shiftKey&&9===event.keyCode)||(this.$firstFocusableElement.focus(),!1)}},{key:"show",value:function(){this.render(),this.accessibility(),this.$el.fadeIn(this.animationSpeed,this.onModalShown.bind(this)),this.$overlay.fadeIn(this.animationSpeed),(0,s.default)(document).on("keydown",this.onKeyDown.bind(this))}},{key:"close",value:function(){this.$overlay.fadeOut(this.animationSpeed),this.$el.fadeOut(this.animationSpeed).empty(),(0,s.default)(this.lastFocus).focus(),d.default.setTabIndex((0,s.default)("body")),this.isOpen=!1,(0,s.default)(document).off("keydown",this.onKeyDown.bind(this))}},{key:"onModalShown",value:function(){var e;this.isOpen=!0,e=d.default.getFocusableElements(this.$el),this.$lastFocusableElement=e.last()}},{key:"render",value:function(){var e={modalTitle:this.modalTitle,primaryButtonText:this.primaryButtonText,content:u.default.template(this.getTemplate())()};this.$el.empty().html((0,p.default)(e))}},{key:"onPrimaryButtonClick",value:function(){this.close()}},{key:"destroy",value:function(){this.$el.off()}}]),DisplayModalView}(_);t.default=g,e.exports=t.default},793:function(e,t,n){"use strict";function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(792),r=_interopRequireDefault(o),i=n(2),a=_interopRequireDefault(i),s=function(e){function DjangoMessagesView(e){return _classCallCheck(this,DjangoMessagesView),a.default.defaults(e,{templateSelector:"#welcome-to-safari-modal-template",primaryButtonText:"GOT IT"}),_possibleConstructorReturn(this,(DjangoMessagesView.__proto__||Object.getPrototypeOf(DjangoMessagesView)).call(this,e))}return _inherits(DjangoMessagesView,e),DjangoMessagesView}(r.default);t.default=s,e.exports=t.default},9:function(e,t,n){"use strict";var o;void 0!==(o=function(e){var t,o,r,i,a,s,l,u,c,d,f,p,_,g,h,m,E,v,y=n(1),S=n(113),I=n(2),b=n(21),O=n(13),T=9;return n(5),t=function(e){return y.ajax({type:e.type,url:e.url,success:e.success})},o=function(e){var t=e.data.el,n=e.data.closeBtn.selector?e.data.closeBtn.selector:e.data.closeBtn[0],o=t.find(n),r=e.data.active_class,i=t.filter("."+r),a=y(e.target);i.length&&(y.contains(i.get(0),e.target)||a.is(t)||o.click())},r=function(e){var t,n,o,r,i=e.removeDelay?e.removeDelay:15e3,a=e.$el||y("#container article header#lead");if(a.length<1&&(a=y(window.IS_TUTORIAL_LESSON?".tutorial-progress-bars":".nav-container")),void 0===e.message)return!1;void 0!==e.unescaped&&!1!==e.unescaped||(e.message=e.message.replace(/[<>]/g,""),e.message=y("<div />").html(e.message).text()),void 0===e.type&&(e.type="info"),r={success:"success",info:"info",error:"error",alert:"alert",true:"success",false:"error"},o=r[e.type],t=y("ul.django-messages"),t.length<1&&(y("<ul class='django-messages'></ul>").insertAfter(a),t=y("ul.django-messages")),e.fixedPosition&&(o+=" fixed-position "),n=y("<li class='"+o+" t-django-message'>"+e.message+' <a class="close" href="#" title="close"><span>Close</span></a></li>'),t.append(n),n.children(".close").click(function(){n.exists=!1,n.fadeOut("fast",function(){n.remove()})}),"success"!==e.type&&"info"!==e.type||setTimeout(function(){!1!==n.exists&&n.fadeOut("fast",function(){n.remove()})},i)},h=function(e,t){var n,o;return void 0===e||""===e?S:(void 0===t&&(t={}),n=b["logentries-tokens"],void 0!==(o=n[e]||!1)&&(t.token=o,S.init(t),S))},a=function(){function get_from_cache(t){return e[t]||(e[t]=y(t)),e[t]}var e={};return{get:get_from_cache}},i=new a,u=function(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)},s=function(){var e=y("ul.django-messages"),t=e.find("li"),n=t.filter(".info, .success");t.length&&(t.each(function(e){t.eq(e).fadeIn("fast")}),t.find(".close").on("click",e,function(t){t.preventDefault(),y(this).closest("li").fadeOut("fast",function(){e.remove()}),"welcome-close"===y(this).attr("id")&&y.cookie("welcome_dismissed",!0)})),n.length&&setTimeout(function(){n.length&&n.each(function(t){n.eq(t).fadeOut("fast"),e.remove()})},15e3)},l=function(e,t){var n=e.find("a[href], area[href], input:not([disabled]),select:not([disabled]), textarea:not([disabled]),button:not([disabled]), iframe, object, embed, *[tabindex],*[contenteditable],.tabbable-item");t=t||{},n.each(function(e){t.remove?y(this).attr("tabindex",-1):y(this).attr("tabindex",e+1)})},f=function(e){e.off("keydown.tabs").on("keydown.tabs",function(e){if((e.keyCode||e.which)===T){e.preventDefault();var t=this.selectionStart,n=this.selectionEnd,o=this.value,r=o.substring(t,n),i=/^/gm,a=r.match(i).length;this.value=o.substring(0,t)+r.replace(i,"\t")+o.substring(n),this.selectionStart=t,this.selectionEnd=n+a}})},c=function(e){var t=new Date(e);return["January","February","March","April","May","June","July","August","September","October","November","December"][t.getUTCMonth()]+" "+t.getUTCDate()+", "+t.getUTCFullYear()},d=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""},m=function(){var e,t=navigator.userAgent,n=t.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[];return/trident/i.test(n[1])?(e=/\brv[ :]+(\d+)/g.exec(t)||[],{name:"IE",version:e[1]||""}):"Chrome"===n[1]&&null!==(e=t.match(/\bOPR\/(\d+)/))?{name:"Opera",version:e[1]}:(n=n[2]?[n[1],n[2]]:[navigator.appName,navigator.appVersion,"-?"],null!==(e=t.match(/version\/(\d+)/i))&&n.splice(1,1,e[1]),{name:n[0],version:n[1]})},p=function(e,t){return t=t||{},!!e&&("undefined"==typeof ga||(!ga.hasOwnProperty("loaded")||!0!==ga.loaded||(t.store?(I.has(I.last(e),"title")||e.push({title:document.title.replace("|","")}),void this.storeAnalyticsCall(e)):void ga.apply(null,e))))},_=function(e){var t;e=JSON.stringify(e),Modernizr.localstorage?localStorage[b.analytics_key]=localStorage[b.analytics_key]?localStorage[b.analytics_key]+"|"+e:e:(t=y.cookie(b.analytics_key)?y.cookie(b.analytics_key)+"|"+e:e,y.cookie(b.analytics_key,t))},g=function(){var e,t,n=O.browser.get(b.analytics_key);n&&(e=n.split("|"),I.each(e,function(e){t=JSON.parse(e),ga.apply(null,t)}),O.browser.remove(b.analytics_key))},E=function(e){return y(e).find("a[href]:not(.get-safari-modal), area[href], input:not(:hidden,:disabled), select:not(:hidden,:disabled), textarea:not(:hidden,:disabled), button:not(:disabled), iframe, object, embed, *[tabindex], *[contenteditable]")},v=function(e){for(var t=window.location.search.substring(1),n=t.split("&"),o=0;o<n.length;o+=1){var r=n[o].split("=");if(r[0]===e)return r[1]}return!1},{ajaxHandler:t,bodyClick:o,callStoredAnalytics:g,getBrowser:m,getFocusableElements:E,getFriendlyUTCTime:c,getQueryParameter:v,logentries:h,notify:r,selectors:i,sendAnalyticsEvent:p,setTabIndex:l,showMessages:s,storeAnalyticsCall:_,stripHtmlFromString:d,textareaTabs:f,validEmail:u}}.call(t,n,t,e))&&(e.exports=o)}},[1298]);